<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DeGuzman Signature — Studio for crafted websites</title>
  <meta name="description" content="DeGuzman Signature — bespoke web design & development studio. Monochrome, minimal, craft-driven websites." />
  <meta name="theme-color" content="#000000" />  <!-- Fonts: Inter for UI, Great Vibes for signature wordmark --> 
  
    <!-- Speed up font host connections -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Single (fixed) Google Fonts request with display=swap to avoid FOIT.
       Combined families to reduce requests. KEEP display=swap. -->
  <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Josefin+Sans:wght@600;700&family=Poppins:wght@300;400;600&family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&family=Libre+Baskerville:wght@400;700&family=Montserrat:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&family=Zeyada&family=Satisfy&family=Parisienne&family=Niconne&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Questrial&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700&display=swap" rel="stylesheet"> 
  <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;700&display=swap" rel="stylesheet">
  <!-- Tailwind Play CDN for fast prototyping (replace with built Tailwind in production). -->  <script src="https://cdn.tailwindcss.com"></script>  <script>
    // Tailwind config (small, only extents if needed)
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'Segoe UI',  'Helvetica Neue', 'Arial'],
            signature: ['"Great Vibes"', 'cursive']
          },
          spacing: {
            // 8px baseline grid: 1 => 8px
            '1x': '0.25rem', /* 4px */
            '2x': '0.5rem',  /* 8px */
            '3x': '0.75rem', /* 12px */
            '4x': '1rem',    /* 16px */
            '6x': '1.5rem',  /* 24px */
            '8x': '2rem',    /* 32px */
            '12x': '3rem',   /* 48px */
            '13': '3.25rem',
            '14': '3.5rem',
            '16x': '4rem',   /* 64px */
            '19': '4.75rem',
          }
        }
      }
    }
  </script>  <!-- Design tokens (grayscale palette + sizing) --> 
  <style>
    /* Cleaned & consolidated stylesheet — v2 fixes

Fixes: body margin (removes white edges), carousel controls z-index/visibility, ensure slide images fully fill viewport in JS-enabled mode, restore zoom transitions.

Duplicates merged; responsive, focus, animations and JS hooks preserved. */


:root{ --g-900:#111111; --g-800:#111; --g-700:#222; --g-600:#444; --g-500:#777; --g-300:#CCCCCC; --g-100:#F7F7F7; --white:#fff;

--fs-hero:3.2rem; --container-max:1200px;

--motion-quick:160ms; --motion-medium:320ms; --motion-ease:cubic-bezier(.2,.9,.3,1); }

/* Accessibility / base */ :focus{outline:none} :focus-visible{outline:3px solid var(--g-300);outline-offset:3px} a:focus-visible,button:focus-visible,input:focus-visible,textarea:focus-visible{outline:3px solid var(--g-300);outline-offset:3px}

html,body{height:100%} body{margin:0; /* fix: remove browser default margins that created white gutters */ font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial; color:var(--g-900);
  background: linear-gradient(to right, #F0F2F1, #E8E9EB);
}

/* Utilities */ .ink{color:var(--g-900)}.muted{color:var(--g-500)} .paper{background:var(--white)}.surface{background:linear-gradient(180deg,var(--g-100),var(--white))} .bg-ink{background:var(--g-900)}.bg-muted{background:var(--g-700)}

.covered {
  background-image: url("/images/heroo.jpg");
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;     /* scale to fill, preserving aspect ratio */
}
}
.wordmark{font-family:'Playfair Display',serif;font-size:1.6rem;letter-spacing:.02em} .logo-sub{font-family:Inter,sans-serif;font-weight:600;letter-spacing:.08em;font-size:.9rem}

.hero-title{font-weight:700;line-height:1;font-size:clamp(2rem,6vw,4.4rem);letter-spacing:-.01em;font-family:Montserrat} .hero-sub{font-size:clamp(1rem,2.6vw,1.125rem);color:var(--g-700);font-family:Quicksand}

.elev-1{box-shadow:0 6px 18px rgba(0,0,0,.07)} .elev-2{box-shadow:0 12px 32px rgba(0,0,0,.09)} .card{border-radius:12px;overflow:hidden;background:linear-gradient(180deg,var(--white),var(--g-100))}

/* Small helpers */ .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* Cookie bar */ .cookie-bar{position:fixed;left:16px;right:16px;bottom:16px;z-index:70;border-radius:12px;padding:12px 16px;display:flex;gap:12px;align-items:center;justify-content:space-between}

/* 404 state */ .error-404{display:flex;align-items:center;justify-content:center;min-height:60vh}

/* ---------------------------- Full-bleed / hero / carousel Keep: overlay alignment, JS hooks (.js-enabled, in-view), --hero-* vars ----------------------------*/

.full-bleed-figure{ position:relative;width:100vw;max-width:100vw; margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw); padding:0;overflow:hidden; --hero-height:auto;transition:height 280ms var(--motion-ease); 
}

/* Image base. Important: set display:block and object-position center to avoid subpixel gutters */ .full-bleed-img{ display:block;object-position:center center;object-fit:cover; transform-origin:center center;will-change:transform;backface-visibility:hidden; width:100vw;max-width:100vw;margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw);height:auto;margin-top:10px; margin-bottom:0; transition:transform var(--motion-medium) var(--motion-ease); }

/* Overlay */ .image-overlay{position:absolute;top:0;left:0;right:0;height:clamp(4.5rem,18vh,30rem);display:flex;align-items:flex-start;pointer-events:auto;background:linear-gradient(to bottom, rgba(17,17,17,.88) 0%, rgba(17,17,17,.65) 30%, rgba(17,17,17,.25) 60%, rgba(17,17,17,0) 100%);z-index:2;color:#fff} .image-overlay__content{width:100%;max-width:1100px;padding:clamp(.5rem,2.5vw,1.25rem) calc(1rem + env(safe-area-inset-left)) clamp(.25rem,1.5vw,.75rem) calc(1rem + env(safe-area-inset-left));box-sizing:border-box;opacity:0;transform:translateY(14px);will-change:transform,opacity}

.image-headline{margin:0;font-size:7.2vw;font-weight:550;font-family:Questrial;line-height:1.05;color:#fff;text-transform:none;-webkit-font-smoothing:antialiased;text-shadow:0 1px 2px rgba(0,0,0,.45)} .image-subtitle{margin:.35rem 0 0 0;font-size:clamp(.875rem,1.6vw,1rem);font-weight:400;font-family:Quicksand;color:#fff;opacity:.98;line-height:1.2;text-shadow:0 1px 1px rgba(0,0,0,.35)}

@media (max-width:420px){.image-overlay{height:clamp(4.5rem,18vh,30rem)}.image-overlay__content{padding-left:calc(.75rem + env(safe-area-inset-left));padding-right:calc(.75rem + env(safe-area-inset-right));padding-top:1rem;padding-bottom:.25rem}}

@media (prefers-reduced-transparency: reduce),(prefers-contrast: more){.image-overlay{background:#3a3a3a}.image-headline,.image-subtitle{text-shadow:none}}

/* Animations & keyframes */ @keyframes hero-zoom-in{from{transform:scale(1) translateZ(0)}to{transform:scale(1.035) translateZ(0)}} @keyframes slide-up-fade{from{transform:translateY(14px);opacity:0}to{transform:translateY(0);opacity:1}}

/* Start animations when in-view (preserve original timings/easing) */ .full-bleed-figure.in-view .full-bleed-img{animation:hero-zoom-in 9s cubic-bezier(.2,.8,.2,1) 0s 1 both} .full-bleed-figure.in-view .image-overlay__content{animation:slide-up-fade 480ms cubic-bezier(.22,.9,.28,1) 180ms 1 both}

/* Reduced motion override */ @media (prefers-reduced-motion: reduce){.full-bleed-figure.in-view .full-bleed-img,.full-bleed-figure.in-view .image-overlay__content{animation:none!important;transform:none!important;opacity:1!important}.full-bleed-img{transition:none!important}}

/* Non-JS stacked fallback */ .slides{display:block}.slide{display:block;margin-bottom:0} .slide .full-bleed-img{width:100vw;height:auto;object-fit:cover;display:block;margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw)}

/* JS-enabled carousel: ensure slides + images fill viewport exactly and remove pull-out margins */ .full-bleed-figure.js-enabled{overflow:hidden} .full-bleed-figure.js-enabled .slides{display:flex;gap:0;transition:transform 360ms var(--motion-ease);will-change:transform;touch-action:pan-y pinch-zoom} .full-bleed-figure.js-enabled .slide{min-width:100vw;flex:0 0 100vw;width:100vw;position:relative;overflow:hidden} .full-bleed-figure.js-enabled .slide .full-bleed-img{width:100vw;height:var(--hero-height);object-fit:cover;margin-left:0;margin-right:0} .full-bleed-figure.js-enabled .image-overlay{position:absolute;top:0;left:0;right:0;height:clamp(4.5rem,18vh,30rem);z-index:2;pointer-events:auto}

/* Controls: make visible and high z-index so buttons/dots are reachable Keep pointer-events: none on container could interfere with drag; leave as auto to ensure visibility. Buttons remain pointer-events:auto so they can be clicked even if container layering changes. */ .carousel-controls{position:absolute;left:0;right:0;bottom:12px;display:flex;justify-content:center;gap:12px;z-index:12;pointer-events:auto;margin-bottom: 12px;} .carousel-controls button,.carousel-dots button{pointer-events:auto;background:rgba(0,0,0,0.35);border:1px solid rgba(255,255,255,0.12);color:#fff;padding:8px 10px;border-radius:999px;backdrop-filter:blur(4px);cursor:pointer;font-size:18px} .carousel-dots{display:flex;gap:8px;align-items:center} .carousel-dots button[aria-pressed="true"]{background:rgba(255,255,255,.95);color:var(--g-900)} .full-bleed-figure:not(.js-enabled) .carousel-controls{display:none}

/* keep comment: controls semantics unchanged for accessibility */
/* CSS-only zoom for the active slide (respects prefers-reduced-motion) */
@media (prefers-reduced-motion: no-preference) {
  .slide.is-active .full-bleed-img {
    animation: hero-zoom-in 9s cubic-bezier(.2,.8,.2,1) 0s 1 both;
    will-change: transform;
    backface-visibility: hidden;
  }
}
@media (prefers-reduced-motion: reduce) {
  .slide.is-active .full-bleed-img { animation: none !important; transform: none !important; }
}

/* visually-hidden helper */
.sr-only {position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* Inline error visuals — keep subtle */
.field--error {
  outline: 2px solid rgba(217, 70, 70, 0.12);
  box-shadow: 0 0 0 3px rgba(217,70,70,0.04);
  transition: box-shadow 160ms ease, outline-color 160ms ease;
}

/* Error node */
.field-error { font-family:Montserrat; color: var(--g-100); font-size: 0.95rem; margin-top: 0.35rem; }

/* Submit microinteraction */
.btn--sending {
  transform: translateY(0); /* CSS hook - keep subtle */
  opacity: 0.95;
}

/* Global messages */
.form-message--error { font-family:Montserrat; color: #E53935; }
.form-message--success { font-family:Montserrat; color: #038C6A; font-weight: 600; }

/* Tailwind-friendly: add to your stylesheet (or via @layer components) */
.btn-primary {
  color: var(--color-foreground, #BDBDBD);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
  border: 1px solid rgba(189,189,189,0.12);
  box-shadow: 0 6px 18px rgba(187,238,221,0.06);
  backdrop-filter: blur(4px);
  font-family:Montserrat;
}

/* microinteraction: subtle lift on hover/focus */
.btn-primary:hover { transform: translateY(-2px); }
.btn-primary:active { transform: translateY(0); }

/* sending state hook */
.btn--sending { pointer-events: none; opacity: 0.94; transform: translateY(0); }

/* visually-hidden helper (if you don't already have sr-only) */
.sr-only { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; border: 0; padding: 0; margin: -1px; }

    /* Socials row */
    .socials {
      display:flex;
      gap:12px;
      align-items:center;
    }
    .socials a {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:44px;
      height:44px;
      border-radius:10px;
      background:rgba(255,255,255,0.06);
      color:#BDBDBD;
      text-decoration:none;
      transition:transform .12s ease, background .12s ease;
    }
    .socials a:hover{ transform:translateY(-3px); background:rgba(255,255,255,0.12); }
    .socials svg{ width:18px; height:18px; }

    /* Small helper: subtle section title / divider */
    .section-title {
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:var(--space-sm);
    }
/* End of cleaned stylesheet v2 */
  </style>
<style>
  /* Component tokens (scoped) */
  :root{
    --menu-bg: rgba(255,255,255,0.02);
    --menu-ink: #111111;
    --menu-muted: #9a9a9a;
    --menu-blur: 10px;
    --menu-shadow: 0 20px 40px rgba(6,6,6,0.5);
    --menu-transition: 320ms cubic-bezier(.2,.9,.3,1);
    --menu-ease: cubic-bezier(.2,.9,.3,1);
    --touch-target: 44px;
    --accent: rgba(255,255,255,0.95);
  }

  /* Reset / helper (keep your site's existing sr-only) */
  .menu-sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

  /* Toggle control (label) — visible trigger that works without JS. We add role/button and tabindex for keyboard support. */
  .menu-toggle{
    display:inline-grid; place-items:center; width:44px; height:44px; border-radius:999px; background:transparent; cursor:pointer;
    -webkit-tap-highlight-color:transparent; transition:transform 180ms var(--menu-ease), background 160ms linear;
  }
  .menu-toggle:active{ transform: scale(.98); }
  .menu-toggle .icon{display:block}

  /* Hidden checkbox (CSS-only fallback uses this) */
  #dg-menu-checkbox{ position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); }

  /* Full-screen menu panel (initially hidden) */
  .dg-mobile-menu-wrap{
    position:fixed; inset:0; z-index:80; pointer-events:none; visibility:hidden; opacity:0; transition:opacity var(--menu-transition), visibility 0s linear var(--menu-transition);
  }

  /* Backdrop */
  .dg-mobile-backdrop{
    position:absolute; inset:0; backdrop-filter: blur(var(--menu-blur)); background:linear-gradient(180deg, rgba(17,17,17,0.55), rgba(17,17,17,0.65));
    opacity:0; transform:scale(1.02); transition:opacity var(--menu-transition), transform var(--menu-transition);
  }

  /* Panel content (centred vertical list) */
  .dg-mobile-panel{
    position: absolute; left:0; right:0; top:12vh; bottom:12vh; margin:auto; max-width:900px; height:calc(76vh); border-radius:16px; padding:clamp(20px,6vw,40px);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); box-shadow:var(--menu-shadow); pointer-events:auto; transform:translateY(8px) scale(.996); opacity:0; transition:opacity var(--menu-transition), transform var(--menu-transition);
    display:flex; flex-direction:column; gap:24px; align-items:stretch;
  }

  /* Menu header row */
  .dg-mobile-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
  .dg-mobile-brand{ font-family: 'Playfair Display', serif; font-size:1.3rem; color:var(--accent); letter-spacing:0.01em }
  .dg-mobile-close{ background:transparent; border-radius:999px; width:44px; height:44px; display:inline-grid; place-items:center; cursor:pointer }

  /* Menu list */
  .dg-mobile-list{ display:flex; flex-direction:column; gap:8px; margin-top:6px; align-items:stretch; }
  .dg-mobile-item{ --pad:14px; padding: calc(var(--pad) + 6px) 12px; font-size:clamp(1.125rem,4.6vw,1.6rem); text-decoration:none; color:var(--accent); display:inline-flex; align-items:center; gap:12px; border-radius:10px; min-height:var(--touch-target); transition:transform 160ms var(--menu-ease), color 160ms ease; }
  .dg-mobile-item:focus{ outline:3px solid rgba(255,255,255,0.06); outline-offset:4px }
  .dg-mobile-item:hover{ transform:translateY(-2px) }

  /* Subtle chevron */
  .dg-mobile-item svg{ width:18px; height:18px; flex:0 0 18px; opacity:0.9 }

  /* Animated underline for active item */
  .dg-mobile-item[data-active="true"]{ position:relative; }
  .dg-mobile-item[data-active="true"]::after{ content:''; position:absolute; left:12px; right:12px; bottom:8px; height:2px; background:linear-gradient(90deg, rgba(255,255,255,0.95), rgba(255,255,255,0.6)); transform-origin:left center; transform:scaleX(1); border-radius:2px }

  /* Lower row: small muted links & socials */
  .dg-mobile-footer{ margin-top:auto; display:flex; flex-direction:column; gap:12px }
  .dg-mobile-meta{ color:var(--menu-muted); font-size:0.95rem }

  /* Focus trap helper visible outline when keyboard used */
  .dg-mobile-panel:focus{ outline:none }

  /* Show menu when checkbox is checked (CSS-only fallback) */
  #dg-menu-checkbox:checked ~ .dg-mobile-menu-wrap{ pointer-events:auto; visibility:visible; opacity:1; transition:opacity var(--menu-transition) }
  #dg-menu-checkbox:checked ~ .dg-mobile-menu-wrap .dg-mobile-backdrop{ opacity:1; transform:scale(1) }
  #dg-menu-checkbox:checked ~ .dg-mobile-menu-wrap .dg-mobile-panel{ opacity:1; transform:translateY(0) }

  /* Reduced motion — prefer reduced motion user setting */
  @media (prefers-reduced-motion: reduce){
    .dg-mobile-panel, .dg-mobile-backdrop, .dg-mobile-menu-wrap{ transition:none !important; }
  }

  /* Desktop: hide mobile panel and checkbox */
  @media(min-width:768px){ #dg-menu-checkbox, .menu-toggle, .dg-mobile-menu-wrap{ display:none !important } }

  /* Ensure high contrast on dark backgrounds */
  @media (prefers-contrast: more){ .dg-mobile-panel{ box-shadow:none; background:rgba(0,0,0,.7) } }
  
  .footer {
    background-image: url("/images/backgrounde.jpeg");
    background-size: cover;        /* Scale image to cover screen */
    background-repeat: no-repeat;  /* Prevent tiling */
    background-position: center;   /* Center the image */
    background-attachment: fixed;
  }
</style>
  </head>
<body class="antialiased">
  <a class="sr-only" href="#main">Skip to content</a>  
<section class="covered">
    <!-- Header / Nav -->  
    <header class="w-full h-2/4 md:h-3/4 border-b" role="banner">
  <div class="max-w-[var(--container-max)] mx-auto px-4 py-6 flex flex-col justify-start gap-6">

    <!-- Top row: logo (left) + mobile button (right) -->
    <div class="w-full flex items-center justify-between">
      <!-- Logo ONLY -->
      <a href="#home" class="flex items-center" aria-label="Home — DeGuzman Signature">
        <img src="/images/dglogo.jpg"
             alt="DeGuzman Signature logo"
             width="76" height="76"
             class="w-13 h-13 object-cover"
             loading="lazy" />
      </a>

<!-- Markup: put inside your header near the logo (replace existing mobile button + #mobileNav) --><!-- Checkbox provides CSS-only fallback (works without JS). Label acts as trigger and is keyboard focusable. --><input id="dg-menu-checkbox" type="checkbox" aria-hidden="true" /><label id="dg-menu-toggle" for="dg-menu-checkbox" class="menu-toggle" aria-controls="dg-mobile-panel" aria-expanded="false" tabindex="0">
  <span class="menu-sr-only">Open menu</span>
  <!-- Minimal hamburger icon -->
  <svg class="icon" width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
    <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
  </svg>
</label><!-- Full-screen panel (sibling to checkbox per CSS selector above) --><div class="dg-mobile-menu-wrap" aria-hidden="true">
  <div class="dg-mobile-backdrop" tabindex="-1" aria-hidden="true"></div>  <nav id="dg-mobile-panel" class="dg-mobile-panel" role="dialog" aria-modal="true" aria-labelledby="dg-mobile-brand" tabindex="-1">
    <div class="dg-mobile-header">
      <div id="dg-mobile-brand" class="dg-mobile-brand">DeGuzman</div>
      <button id="dg-menu-close" class="dg-mobile-close" aria-label="Close menu">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
    </div><div class="dg-mobile-list" role="menu" aria-label="Primary mobile navigation">
  <a href="#services" class="dg-mobile-item" role="menuitem" data-nav-target="#services">Services
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </a>

  <a href="#about" class="dg-mobile-item" role="menuitem" data-nav-target="#about">About
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </a>

  <a href="#contact" class="dg-mobile-item" role="menuitem" data-nav-target="#contact">Contact
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </a>

  <a href="#" class="dg-mobile-item" role="menuitem" data-active="true">Let's talk
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </a>
</div>

<div class="dg-mobile-footer">
  <div class="dg-mobile-meta">Based remotely • Crafted with care</div>
  <div style="display:flex;gap:10px;align-items:center">
    <a class="dg-mobile-meta" href="#privacy">Privacy</a>
    <a class="dg-mobile-meta" href="#terms">Terms</a>
  </div>
</div>

  </nav>
</div>
    </div>

    <!-- Main headline stacked under the top row, left-aligned and very large -->
    <div class="w-full mt-7">
      <h1 class="text-[clamp(5rem,14vw,12rem)] sm:text-[clamp(6rem,13vw,14rem)] leading-none font-extrabold text-left"
          style="font-family: 'Great Vibes', cursive;">
        DeGuzman
        <span class="text-[clamp(4rem,12vw,10rem)] sm:text-[clamp(5rem,11vw,11rem)] leading-none font-extrabold text-left">Signature</span>
      </h1>
    </div>
</header>
    
    <main id="main" role="main">
    <!-- Hero -->
    <section id="home" class="max-w-[var(--container-max)] mx-auto px-4 py-12 md:py-20">
      <div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-center">
        <div class="md:col-span-7">
          <h1 class="hero-title">We build considered, crafted websites — minimal, monochrome, and built to last.</h1>
          <p class="hero-sub mt-4">Digital craftsmanship for product teams and creative studios. We combine refined design, fast front-end engineering, and accessibility-first thinking.</p>
      </div>

    </div>
  </div>
</section>

<div class="mt-0 mb-1 flex items-center gap-4 text-sm muted">
        <span class="inline-block h-[1px] w-14 bg-[var(--g-300)]"></span>
        <span>DeGuzman signature • Based remotely</span>
      </div>
</section>

<figure class="full-bleed-figure" data-carousel>
  <!-- Slides container (non-JS fallback: stacked). When JS runs .js-enabled is added to the figure
       and .slides becomes a horizontal slider (display:flex + transform). -->
  <div class="slides" role="group" aria-roledescription="carousel" aria-label="Selected work carousel">
    <!-- Slide 1 (initial image — load eagerly to avoid LCP delay) -->
    <div class="slide" data-slide-index="0" aria-roledescription="slide" aria-label="Selected Work — A curated selection" >
      <img
        src="/images/large.jpg"
        alt="Descriptive alt text"
        class="full-bleed-img"
        loading="eager"
        width="1920" height="720"
      />
      <!-- caption styled with your existing .image-overlay classes.
           Default (no-js) the overlay will be flow content below the image;
           when JS enables the carousel the overlay becomes absolutely positioned
           and lines up exactly like the current hero. -->
      <figcaption class="image-overlay" role="group" aria-hidden="false">
        <div class="image-overlay__content">
          <h2 class="image-headline">Selected Work</h2>
          <p class="image-subtitle">A curated selection of recent projects — monochrome-focused concepts and builds.</p>
        </div>
      </figcaption>
    </div>

    <!-- Slide 2 -->
    <div class="slide" data-slide-index="1" aria-roledescription="slide" aria-label="Project: Atmos — Minimal e-commerce">
      <img
        src="/images/galleryq.jpg"
        alt="Atmos site screenshot"
        class="full-bleed-img"
        loading="lazy"
        width="1920" height="720"
      />
      <figcaption class="image-overlay" role="group" aria-hidden="true">
        <div class="image-overlay__content">
          <h2 class="image-headline">Atmos</h2>
          <p class="image-subtitle">Minimal e-commerce experience — refined product storytelling.</p>
        </div>
      </figcaption>
    </div>

    <!-- Slide 3 -->
    <div class="slide" data-slide-index="2" aria-roledescription="slide" aria-label="Project: Studio — Portfolio concept">
      <img
        src="/images/galleryy.jpg"
        alt="Studio portfolio screenshot"
        class="full-bleed-img"
        loading="lazy"
        width="1920" height="720"
      />
      <figcaption class="image-overlay" role="group" aria-hidden="true">
        <div class="image-overlay__content">
          <h2 class="image-headline">Studio</h2>
          <p class="image-subtitle">A refined portfolio concept — emphasis on craft and detail.</p>
        </div>
      </figcaption>
    </div>
  </div>

  <!-- Controls: prev / next and dots. Visible when JS enabled. -->
  <div class="carousel-controls" aria-hidden="true">
    <button class="carousel-prev" type="button" aria-label="Previous slide">‹</button>
    <div class="carousel-dots" role="tablist" aria-label="Slides"></div>
    <button class="carousel-next" type="button" aria-label="Next slide">›</button>
  </div>

  <!-- Live announcer for screen readers; updated when slide changes -->
  <div class="sr-only" id="carousel-announcer" aria-live="polite"></div>
</figure>

<!-- Services -->
<section id="services" class="border-t py-12">
  <div class="max-w-[var(--container-max)] mx-auto px-4">
    <h2 style="font-family: Playfair Display" class="text-3xl font-raleway font-semibold">Services</h2>
    <p style="font-family: Raleway" class="muted mt-2">We offer end-to-end front-end development and design systems focused on performance and accessibility.</p>

    <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <article style="font-family: Nunito Sans" class="card p-6 elev-1" tabindex="0" aria-labelledby="s1">
        <h3 id="s1" class="font-semibold">Design Systems & UI</h3>
        <p class="muted mt-2 text-sm">Tokens, components, and accessible patterns that scale across products.</p>
      </article>

      <article style="font-family: Nunito Sans" class="card p-6 elev-1" tabindex="0" aria-labelledby="s2">
        <h3 id="s2" class="font-semibold">Front-end Engineering</h3>
        <p class="muted mt-2 text-sm">Production-ready HTML/CSS/JS, build pipelines, and performance optimizations.</p>
      </article>

      <article style="font-family: Nunito Sans" class="card p-6 elev-1" tabindex="0" aria-labelledby="s3">
        <h3 id="s3" class="font-semibold">Accessibility & Audits</h3>
        <p class="muted mt-2 text-sm">WCAG-compliant audits, remediation, and keyboard-first interactions.</p>
      </article>
    </div>
  </div>
</section>

<!-- About / Team -->
<section id="about" style="background: #0d2440;" class="py-12 border-t">
  <div class="max-w-[var(--container-max)] mx-auto px-4">
    <h2 style="color: #ffffff; font-family: Playfair Display" class="text-4xl font-semibold">Behind the Scenes</h2>
    <p style="color: #BDBDBD; font-family: Mulish;" class="muted mt-2">DeGuzman Signature is a small studio crafting clean, accessible front-end experiences. We prefer restraint — a focus on copy, layout, and motion that serves the content.</p>

    <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 gap-6">
      <div style="background: #e7f0fa;" class="card p-6 elev-1">
        <h3 style="font-family:Montserrat" class="font-semibold">Philosophy</h3>
        <p style="font-family: Quicksand" class="muted mt-2 text-sm">Clarity, performance, and accessibility are the pillars of our process. We design systems that make decisions — not noise.</p>
      </div>

      <div style="background: #e7f0fa;" class="card p-6 elev-1">
        <h3 style="font-family:Montserrat" class="font-semibold">The team</h3>
        <p style="font-family: Raleway" class="muted mt-2 text-sm">A tight-knit group: designers, front-end engineers, and accessibility consultants. Remote-first and experienced across agencies and startups.</p>
      </div>
    </div>
  </div>
</section>

<!-- Contact -->
<section id="contact" style="background: #0d2440;" class="py-12">
  <div class="max-w-[var(--container-max)] mx-auto px-4">
    <h2 style="color: #7da4d0; font-family: Playfair display" class="text-4xl font-semibold">Get in touch</h2>
    <p style="color: #BDBDBD; font-family: Mulish;" class="muted mt-2">Prefer email? hello@deguzman.signature (example). Use the form below or reach out on LinkedIn.</p>

    <form id="contactForm" class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6" novalidate>
      <div>
        <label for="name" class="text-sm text-[#9AA0A6]">Name</label>
        <input id="name" style="font-family: Questrial" name="name" required class="w-full mt-2 p-3 border rounded-md" placeholder="Your name">
      </div>

      <div>
        <label for="email" class="text-sm text-[#9AA0A6]">Email</label>
        <input id="email" style="font-family: Questrial" name="email" type="email" required class="w-full mt-2 p-3 border rounded-md" placeholder="you@example.com">
      </div>

      <div class="md:col-span-2">
        <label for="message" class="text-sm text-[#9AA0A6]">Message</label>
        <textarea id="message" style="font-family: Questrial; color: #2e5e99;" name="message" rows="6" required class="w-full mt-2 p-3 border rounded-md" placeholder="Tell us about your project"></textarea>
      </div>

      <!--
  Place inside your form. Keeps layout responsive (md:col-span-2) and
  adds ARIA hooks + subtle microinteraction. Uses Tailwind utility classes.
-->
<div class="md:col-span-2 flex items-center gap-4">
  <button
    id="contactSubmit"
    type="submit"
    class="btn-primary inline-flex items-center gap-3 px-5 py-2 rounded-2xl text-sm font-semibold tracking-wide transition-transform duration-150 focus:outline-none focus:ring-4 focus:ring-opacity-20 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-900"
    aria-live="polite"
    aria-atomic="true"
  >
    <!-- spinner hidden by default; shown when sending -->
    <svg id="contactSpinner" class="hidden w-4 h-4 animate-spin" viewBox="0 0 24 24" aria-hidden="true">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-opacity="0.15" fill="none"></circle>
      <path d="M22 12c0-5.523-4.477-10-10-10" stroke="currentColor" stroke-width="3" stroke-linecap="round" fill="none"></path>
    </svg>

    <span id="contactBtnText">Send message</span>
  </button>

  <!-- concise supporting copy -->
  <div id="contactHint" style="font-family:Questrial" class="muted text-sm text-gray-500 dark:text-gray-400">
    We respond within 2–3 business days.
  </div>

  <!-- screen-reader & programmatic status updates (kept visually hidden) -->
  <div id="contactStatus" class="sr-only" role="status" aria-live="polite"></div>
</div>
    </form>

    <div id="formMessage" class="mt-4 sr-only" role="status" aria-live="polite"></div>
  </div>
</section>

  </main>  <!-- Footer -->  <footer class="footer border-t py-8">
    <div class="max-w-[var(--container-max)] mx-auto px-4 flex flex-col md:flex-row items:center justify-between gap-4">
      <div class="flex items-center gap-3">
        <div style="color:#ffffff" class="wordmark">DeGuzman</div>
        <div class="text-sm muted">© <span id="year"></span> DeGuzman Signature</div>
      </div>
      <div style="margin-top:12px" class="socials" aria-label="Social links">
      <a href="#" aria-label="Follow on Facebook" title="Facebook">
        <!-- Facebook "f" — cleaned up, production-ready path (from Bootstrap / Wikimedia copy) -->
        <svg aria-hidden="true" role="img" width="20" height="20" viewBox="0 0 16 16" fill="currentColor" style="flex:0 0 20px" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
        </svg>
      </a>

      <a href="#" aria-label="Follow on X (formerly Twitter)" title="X">
        <!-- X icon — high-contrast, compact glyph that reads crisply at 20×20.
             (If you need the exact official vector artwork for brand compliance,
              grab the official SVG from X's brand toolkit - link cited below.) -->
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16">
  <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"/>
</svg>

      </a>

      <a href="#" aria-label="Follow on Instagram" title="Instagram">
        <!-- Instagram simplified glyph (unchanged) -->
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" width="22" height="22" style="flex:0 0 20px">
          <rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.4" fill="none"/>
          <circle cx="12" cy="11.5" r="3" stroke="currentColor" stroke-width="1.4" fill="none"/>
          <circle cx="17.6" cy="6.5" r="0.85" fill="currentColor"/>
        </svg>
      </a>
    </div>
      <div class="text-sm muted mt-5">We'd love to hear from you — <a href="mailto:biz@bic.be" class="text-white font-medium">biz@bic.be</a></div>
    </div>
  </footer>  <!-- Cookie / Privacy notice -->  <div id="cookieBar" class="cookie-bar elev-2 bg-white hidden" role="region" aria-live="polite">
    <div class="flex items-center gap-3">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M12 2v2M20 12h2M12 20v2M2 12H0" stroke="#111" stroke-width="1.2" stroke-linecap="round"/></svg>
      <div class="text-sm">We use a small set of cookies to improve the site experience. By continuing you agree to our <a href="#privacy">privacy policy</a>.</div>
    </div>
    <div class="flex items-center gap-2">
      <button id="acceptCookies" class="btn-ghost">Accept</button>
      <button id="cookieManage" class="btn-ghost">Manage</button>
    </div>
  </div>

  <!-- Minimal client JS (vanilla) -->
<script type="module">
/* Refactored site JS: utilities, UI helpers, cookie/form/nav, small IO fallback, and carousel.
   Public surface preserved: window.DG.initCarousel and figure.__initCarousel
   NOTE: inline image transform/transition manipulations removed to avoid wrap snap.
*/
(() => {
  /* ---------- Utilities ---------- */
  const $ = (sel, ctx = document) => ctx.querySelector(sel);
  const $$ = (sel, ctx = document) => Array.from(ctx.querySelectorAll(sel));
  const prefersReducedMotion = typeof window !== 'undefined'
    && window.matchMedia
    && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // safe DOM helper
  const on = (el, type, fn, opts) => el?.addEventListener(type, fn, opts);

  /* ---------- Small Page Behaviors ---------- */

  // Year in footer
  const yearEl = document.getElementById('year');
  if (yearEl) yearEl.textContent = String(new Date().getFullYear());

  // Mobile nav toggle
  const navToggle = $('#navToggle');
  const mobileNav = $('#mobileNav');
  if (navToggle && mobileNav) {
    on(navToggle, 'click', function () {
      const expanded = this.getAttribute('aria-expanded') === 'true';
      this.setAttribute('aria-expanded', String(!expanded));
      mobileNav.classList.toggle('hidden');
    });
  }

/**
contact form js
 */

(() => {
  // CONFIG
  const FORM_SELECTOR = '#contactForm';
  const SUBMIT_BTN_SELECTOR = 'button[type="submit"]';
  const MIN_NAME_LENGTH = 2;
  const MIN_MESSAGE_LENGTH = 10;
  const INPUT_DEBOUNCE_MS = 300;
  const SIMULATED_NETWORK_MS = 900;

  // Utilities
  const qs = (sel, ctx = document) => ctx.querySelector(sel);
  const qsa = (sel, ctx = document) => Array.from((ctx || document).querySelectorAll(sel));
  const createEl = (tag, attrs = {}, text = '') => {
    const el = document.createElement(tag);
    Object.entries(attrs).forEach(([k, v]) => {
      if (v === true) el.setAttribute(k, '');
      else if (v !== false && v != null) el.setAttribute(k, v);
    });
    if (text) el.textContent = text;
    return el;
  };
  const debounce = (fn, wait = 200) => {
    let t;
    return (...args) => {
      clearTimeout(t);
      t = setTimeout(() => fn(...args), wait);
    };
  };

  // Basic validators
  const validators = {
    name: (value) => {
      if (!value) return 'Please enter your name.';
      if (value.length < MIN_NAME_LENGTH) return `Name must be at least ${MIN_NAME_LENGTH} characters.`;
      return '';
    },
    email: (value) => {
      if (!value) return 'Please enter your email address.';
      // simplified but practical email regex
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!re.test(value)) return 'Please enter a valid email address (e.g. you@domain.com).';
      return '';
    },
    message: (value) => {
      if (!value) return 'Please enter a message.';
      if (value.length < MIN_MESSAGE_LENGTH) return `Message is a bit short — try at least ${MIN_MESSAGE_LENGTH} characters.`;
      return '';
    },
  };

  // Form message (global) - improved accessibility
  const form = qs(FORM_SELECTOR);
  if (!form) return; // nothing to do

  // Ensure there is a global message container or create one.
  // It will be placed at the top of the form for assistive tech.
  let formMessage = qs('#formMessage', form);
  if (!formMessage) {
    formMessage = createEl('div', {
      id: 'formMessage',
      'aria-live': 'polite',
      'aria-atomic': 'true',
      role: 'status',
      class: 'form-message sr-only', // sr-only can hide visually while keeping for screen readers
    });
    form.prepend(formMessage);
  }

  const showFormMessage = (text, { isError = true, persistent = false } = {}) => {
    formMessage.classList.remove('sr-only', 'form-message--success', 'form-message--error');
    formMessage.classList.add(isError ? 'form-message--error' : 'form-message--success');
    formMessage.textContent = text;
    // keep visually presented message briefly unless persistent is true
    if (!persistent) {
      setTimeout(() => {
        // fade back to sr-only to avoid distracting users after a moment
        if (formMessage) formMessage.classList.add('sr-only');
      }, 5000);
    }
  };

  // Create inline error element for a field (if not present)
  const ensureErrorNode = (field) => {
    const name = field.getAttribute('name') || field.id;
    if (!name) return null;
    const id = `err-${name}`;
    let err = qs(`#${id}`, form);
    if (!err) {
      err = createEl('div', {
        id,
        class: 'field-error sr-only',
        role: 'alert',
        'aria-live': 'polite',
      });
      // place it just after the field for visual users
      field.insertAdjacentElement('afterend', err);
    }
    return err;
  };

  // Apply or clear field error state
  const setFieldError = (field, message) => {
    const err = ensureErrorNode(field);
    if (message) {
      field.classList.add('field--error'); // styling hook
      field.setAttribute('aria-invalid', 'true');
      if (err) {
        err.classList.remove('sr-only');
        err.textContent = message;
        field.setAttribute('aria-describedby', err.id);
      }
    } else {
      field.classList.remove('field--error');
      field.removeAttribute('aria-invalid');
      if (err) {
        err.classList.add('sr-only');
        err.textContent = '';
      }
      // remove aria-describedby if it points to our error node and it's empty
      const desc = field.getAttribute('aria-describedby');
      if (desc === (err && err.id)) field.removeAttribute('aria-describedby');
    }
  };

  // Validate a single field by name
  const validateByField = (field) => {
    if (!field) return '';
    const name = field.getAttribute('name');
    const val = (field.value || '').toString().trim();
    const validator = validators[name] || (() => '');
    const error = validator(val);
    setFieldError(field, error);
    return error;
  };

  // Validate all tracked fields: return array of invalid fields
  const validateAll = (fields) => {
    const invalids = [];
    fields.forEach((f) => {
      const err = validateByField(f);
      if (err) invalids.push(f);
    });
    return invalids;
  };

  // Collect fields we care about now (name, email, message)
  const trackedFields = ['name', 'email', 'message']
    .map((n) => qs(`[name="${n}"]`, form))
    .filter(Boolean);

  // Wire up events: input (debounced) + blur (immediate)
  trackedFields.forEach((field) => {
    const debouncedValidate = debounce(() => validateByField(field), INPUT_DEBOUNCE_MS);
    field.addEventListener('input', debouncedValidate, { passive: true });
    field.addEventListener('blur', () => validateByField(field));
    // mark touched to style differently if desired
    field.addEventListener('focus', () => field.classList.add('field--touched'));
  });

  // Submit handling
  const submitBtn = qs(SUBMIT_BTN_SELECTOR, form);
  const setSubmittingState = (isSubmitting) => {
    if (!submitBtn) return;
    submitBtn.disabled = isSubmitting;
    if (isSubmitting) {
      submitBtn.classList.add('btn--sending'); // CSS hook for subtle microinteraction
      submitBtn.setAttribute('aria-busy', 'true');
      submitBtn.dataset.origText = submitBtn.textContent;
      submitBtn.textContent = 'Sending…';
    } else {
      submitBtn.classList.remove('btn--sending');
      submitBtn.removeAttribute('aria-busy');
      if (submitBtn.dataset.origText) submitBtn.textContent = submitBtn.dataset.origText;
      delete submitBtn.dataset.origText;
    }
  };

  const focusFirstInvalid = (fields) => {
    if (fields && fields.length) {
      fields[0].focus({ preventScroll: true });
    }
  };

  const handleSuccess = (message = 'Thanks — your message has been sent.') => {
    setSubmittingState(false);
    form.reset();
    // clear field errors
    trackedFields.forEach((f) => setFieldError(f, ''));
    showFormMessage(message, { isError: false, persistent: false });
    // set focus to success message for screen reader users
    formMessage.classList.remove('sr-only');
    formMessage.focus?.();
  };

  const handleFailure = (message = 'Something went wrong. Please try again later.') => {
    setSubmittingState(false);
    showFormMessage(message, { isError: true, persistent: false });
  };

  form.addEventListener('submit', async (ev) => {
    ev.preventDefault();

    // re-validate all fields synchronously
    const invalids = validateAll(trackedFields);
    if (invalids.length) {
      showFormMessage('Please review the highlighted fields and fix any errors.', { isError: true, persistent: false });
      focusFirstInvalid(invalids);
      return;
    }

    // pass validation -> submit
    setSubmittingState(true);

    // Build payload
    const data = new FormData(form);

    // If form.action exists, try a fetch POST (guarded)
    const action = form.getAttribute('action') || '';
    const method = (form.getAttribute('method') || 'POST').toUpperCase();

    try {
      if (action) {
        // Optional: send as JSON if preferred. Here we submit as form-encoded.
        const fetchOpts = {
          method: method,
          body: method === 'GET' ? undefined : data,
          headers: {}, // let browser set content-type for FormData
        };

        // Small timeout for microinteraction (still awaiting network)
        const controller = new AbortController();
        const signal = controller.signal;
        fetchOpts.signal = signal;

        // Optionally implement a client-side timeout (e.g. 12s); omitted for brevity
        const resp = await fetch(action, fetchOpts);
        if (!resp.ok) {
          // try to parse server message
          let serverMsg;
          try {
            const j = await resp.json();
            serverMsg = j && j.message;
          } catch (e) {
            serverMsg = null;
          }
          throw new Error(serverMsg || `Server returned ${resp.status}`);
        }
        // success
        handleSuccess('Thanks — your message has been sent.');
      } else {
        // no action provided — simulate network for demo/local testing
        await new Promise((r) => setTimeout(r, SIMULATED_NETWORK_MS));
        handleSuccess('Thanks — your message has been sent (simulated).');
      }
    } catch (err) {
      console.error('Contact form submit error:', err);
      handleFailure('We couldn’t send your message. Please try again or email us directly.');
    }
  });

  // Optional: keyboard "Enter" submit from multiline fields handled by native form
  // Extra: expose a small API on the form element for testing or custom behavior
  form.contactValidation = {
    validateField: (name) => {
      const fld = qs(`[name="${name}"]`, form);
      return fld ? validateByField(fld) : null;
    },
    validateAll: () => validateAll(trackedFields),
  };
})();

  // Cookie bar — show once unless accepted
  const cookieKey = 'dg_accept_cookies_v1';
  const cookieBar = $('#cookieBar');
  const acceptBtn = $('#acceptCookies');
  const manageBtn = $('#cookieManage');
  if (cookieBar && !localStorage.getItem(cookieKey)) cookieBar.classList.remove('hidden');
  on(acceptBtn, 'click', () => {
    localStorage.setItem(cookieKey, '1');
    cookieBar?.classList.add('hidden');
  });
  on(manageBtn, 'click', () => {
    // placeholder — keep as-is so site owner can wire a real UI
    alert('Cookie settings placeholder — implement per your privacy policy.');
  });

  // Skip link accessibility (guarded)
  const skip = document.querySelector('a[href="#main"]');
  if (skip) on(skip, 'click', (e) => {
    const main = document.getElementById('main');
    if (main) {
      // some browsers need a focus call
      e.preventDefault();
      main.tabIndex = main.tabIndex >= 0 ? main.tabIndex : -1;
      main.focus();
    }
  });

  /* ---------- Lightweight IO fallback for non-carousel full-bleed figures ---------- */
  // Mark .full-bleed-figure in-view immediately if IO unsupported
  if (!('IntersectionObserver' in window)) {
    $$('.full-bleed-figure').forEach(el => el.classList.add('in-view'));
  } else {
    // small observer to add in-view to elements not handled elsewhere
    const fbFigures = $$('.full-bleed-figure');
    if (fbFigures.length) {
      const io = new IntersectionObserver((entries, o) => {
        entries.forEach(en => {
          if (en.isIntersecting) {
            en.target.classList.add('in-view');
            o.unobserve(en.target);
          }
        });
      }, { threshold: 0.4 });
      fbFigures.forEach(f => io.observe(f));
    }
  }

  /* ---------- Carousel module (no inline image transforms) ---------- */
  const SWIPE_THRESHOLD = 50;
  const WRAP_ANIM_MS = 500;
  const WRAP_EASE = 'ease-in-out';
  const IMG_ZOOM = 1.02;
  const IMG_DURATION = WRAP_ANIM_MS;
  const IMG_EASING = 'cubic-bezier(.32,.84,.45,1)';

  // NOTE: removed inline transform/transition manipulation.
  // Keep API surface (functions exist) but they are intentionally no-ops.
  function setImageZoomInline(/* imgEl, zoom, duration, easing */) {
    // intentionally no-op: zoom handled by CSS (avoid inline transforms)
    return;
  }
  function clearImageInline(/* imgEl */) {
    // intentionally no-op
    return;
  }

  function initCarousel(figureEl) {
    if (!figureEl || !(figureEl instanceof Element)) return;
    const slidesWrap = figureEl.querySelector('.slides');
    if (!slidesWrap) return;

    const slides = () => Array.from(slidesWrap.querySelectorAll('.slide'));
    let active = 0;
    let busy = false;
    let lastActive = 0;

    // If only one slide, mark active and bail
    if (slides().length <= 1) {
      slides()[0]?.classList.add('is-active');
      return;
    }

    figureEl.classList.add('js-enabled');

    function setSizes() {
      const s = slides();
      slidesWrap.style.width = `${s.length * 100}vw`;
      s.forEach(sl => {
        Object.assign(sl.style, {
          width: '100vw',
          flex: '0 0 100vw',
          minWidth: '100vw',
          overflow: 'hidden'
        });
      });
    }
    setSizes();

    const controls = figureEl.querySelector('.carousel-controls');
    const prevBtn = controls?.querySelector('.carousel-prev');
    const nextBtn = controls?.querySelector('.carousel-next');
    const dotsContainer = controls?.querySelector('.carousel-dots');
    const announcer = figureEl.querySelector('#carousel-announcer');

    // Build stable dots if needed
    let dotButtons = [];
    if (dotsContainer) {
      if (!dotsContainer.children.length) {
        slides().forEach((_, i) => {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'carousel-dot';
          btn.setAttribute('aria-label', `Go to slide ${i + 1}`);
          btn.setAttribute('aria-pressed', String(i === active));
          btn.dataset.index = String(i);
          btn.addEventListener('click', () => { if (!busy) goTo(i); });
          dotsContainer.appendChild(btn);
        });
      }
      dotButtons = Array.from(dotsContainer.children);
    }
    const setDotsPressed = (idx) => dotButtons.forEach((b, i) => b.setAttribute('aria-pressed', String(i === idx)));

    function updateUI() {
      slidesWrap.style.transition = '';
      slidesWrap.style.transform = `translateX(-${active * 100}vw)`;

      slides().forEach((s, i) => {
        const isActive = i === active;
        const img = s.querySelector('img.full-bleed-img');
        s.setAttribute('aria-hidden', String(!isActive));
        s.classList.toggle('is-active', isActive);
        // previously JS applied inline zoom here; removed to avoid conflicts.
        const overlay = s.querySelector('.image-overlay');
        if (overlay) overlay.setAttribute('aria-hidden', String(!isActive));
      });

      setDotsPressed(active);

      if (announcer) {
        const cur = slides()[active];
        const headline = cur?.querySelector('.image-headline')?.textContent?.trim();
        const subtitle = cur?.querySelector('.image-subtitle')?.textContent?.trim();
        announcer.textContent = headline ? `${headline}. ${subtitle || ''}` : `Slide ${active + 1} of ${slides().length}`;
      }
      lastActive = active;
    }

    const clamp = (i) => {
      const n = slides().length;
      if (i < 0) return n - 1;
      if (i >= n) return 0;
      return i;
    };

    // cleanup becomes a benign helper (no inline styles to remove)
    function cleanupInlineStylesForAll(/* delay = IMG_DURATION + 40 */) {
      // no-op now (kept for API stability)
      return;
    }

    function goTo(index) {
      if (busy) return;
      lastActive = active;
      active = clamp(index);
      updateUI();
      cleanupInlineStylesForAll();
    }

    /* --- wrapping animations (clone + animate) --- */
    const safetyDispatchEnd = (target, ms) => setTimeout(() => target.dispatchEvent(new Event('transitionend')), ms + 120);

    function wrapNext() {
      if (busy) return;
      busy = true;
      const s = slides();
      const firstSlide = s[0];
      if (!firstSlide) { busy = false; return; }

      // prepare clone
      const clone = firstSlide.cloneNode(true);
      clone.querySelectorAll('[id]').forEach(el => el.removeAttribute('id'));
      clone.removeAttribute('id');

      // NOTE: previously JS set inline transforms here (removed)

      slidesWrap.appendChild(clone);
      const newCount = s.length + 1;
      slidesWrap.style.width = `${newCount * 100}vw`;
      Object.assign(clone.style, { width: '100vw', flex: '0 0 100vw', minWidth: '100vw', overflow: 'hidden' });

      // jump to current position, then animate to appended clone
      slidesWrap.style.transition = 'none';
      slidesWrap.style.transform = `translateX(-${active * 100}vw)`;
      // force paint
      clone.offsetHeight; slidesWrap.offsetHeight;

      slidesWrap.style.transition = `transform ${WRAP_ANIM_MS}ms ${WRAP_EASE}`;
      slidesWrap.style.transform = `translateX(-${(newCount - 1) * 100}vw)`;
      figureEl.style.pointerEvents = 'none';

      const tidy = () => {
        slidesWrap.removeChild(clone);
        slidesWrap.style.transition = 'none';
        slidesWrap.style.width = `${s.length * 100}vw`;
        active = 0;
        // previously JS re-applied inline zoom here; removed
        slidesWrap.style.transform = `translateX(0)`;
        slidesWrap.offsetHeight;
        slidesWrap.style.transition = '';
        figureEl.style.pointerEvents = '';
        busy = false;
        updateUI();
        cleanupInlineStylesForAll();
      };

      const onEnd = (ev) => {
        if (ev && ev.target !== slidesWrap) return;
        slidesWrap.removeEventListener('transitionend', onEnd);
        tidy();
      };
      slidesWrap.addEventListener('transitionend', onEnd, { once: true });
      safetyDispatchEnd(slidesWrap, WRAP_ANIM_MS);
    }

    function wrapPrev() {
      if (busy) return;
      busy = true;
      const s = slides();
      const lastIndex = s.length - 1;
      const lastSlide = s[lastIndex];
      if (!lastSlide) { busy = false; return; }

      const clone = lastSlide.cloneNode(true);
      clone.querySelectorAll('[id]').forEach(el => el.removeAttribute('id'));
      clone.removeAttribute('id');

      // NOTE: previously JS set inline transforms here; removed

      slidesWrap.insertBefore(clone, slidesWrap.firstChild);
      const newCount = s.length + 1;
      slidesWrap.style.width = `${newCount * 100}vw`;
      Object.assign(clone.style, { width: '100vw', flex: '0 0 100vw', minWidth: '100vw', overflow: 'hidden' });

      // position so logical slide 0 is in view, then animate to show clone from left
      slidesWrap.style.transition = 'none';
      slidesWrap.style.transform = `translateX(-100vw)`;
      clone.offsetHeight; slidesWrap.offsetHeight;

      slidesWrap.style.transition = `transform ${WRAP_ANIM_MS}ms ${WRAP_EASE}`;
      slidesWrap.style.transform = `translateX(0)`;
      figureEl.style.pointerEvents = 'none';

      const tidy = () => {
        slidesWrap.removeChild(clone);
        slidesWrap.style.transition = 'none';
        slidesWrap.style.width = `${s.length * 100}vw`;
        active = lastIndex;
        // previously JS re-applied inline zoom here; removed
        slidesWrap.style.transform = `translateX(-${active * 100}vw)`;
        slidesWrap.offsetHeight;
        slidesWrap.style.transition = '';
        figureEl.style.pointerEvents = '';
        busy = false;
        updateUI();
        cleanupInlineStylesForAll();
      };

      const onEnd = (ev) => {
        if (ev && ev.target !== slidesWrap) return;
        slidesWrap.removeEventListener('transitionend', onEnd);
        tidy();
      };
      slidesWrap.addEventListener('transitionend', onEnd, { once: true });
      safetyDispatchEnd(slidesWrap, WRAP_ANIM_MS);
    }

    function next() {
      if (busy) return;
      const n = slides().length;
      if (active === n - 1) wrapNext();
      else { lastActive = active; active = clamp(active + 1); updateUI(); cleanupInlineStylesForAll(); }
    }
    function prev() {
      if (busy) return;
      if (active === 0) wrapPrev();
      else { lastActive = active; active = clamp(active - 1); updateUI(); cleanupInlineStylesForAll(); }
    }

    // keyboard and control hooks
    on(figureEl, 'keydown', (e) => {
      if (e.key === 'ArrowLeft') { e.preventDefault(); prev(); }
      else if (e.key === 'ArrowRight') { e.preventDefault(); next(); }
      else if (e.key === 'Home') { e.preventDefault(); lastActive = active; active = 0; updateUI(); }
      else if (e.key === 'End') { e.preventDefault(); lastActive = active; active = slides().length - 1; updateUI(); }
    });
    on(prevBtn, 'click', prev);
    on(nextBtn, 'click', next);

    // pointer swipe gestures
    let dragging = false, startX = 0;
    on(slidesWrap, 'pointerdown', (ev) => {
      if (busy) return;
      figureEl.classList.add('no-zoom');
      dragging = true;
      startX = ev.clientX;
      slidesWrap.setPointerCapture(ev.pointerId);
      slidesWrap.style.transition = 'none';
    });
    on(slidesWrap, 'pointermove', (ev) => {
      if (!dragging) return;
      const dx = ev.clientX - startX;
      slidesWrap.style.transform = `translateX(calc(-${active * 100}vw + ${dx}px))`;
    });
    on(slidesWrap, 'pointerup', (ev) => {
      if (!dragging) return;
      dragging = false;
      const dx = ev.clientX - startX;
      slidesWrap.releasePointerCapture(ev.pointerId);
      slidesWrap.style.transition = '';
      if (Math.abs(dx) > SWIPE_THRESHOLD) {
        if (dx > 0) prev(); else next();
      } else updateUI();
      figureEl.classList.remove('no-zoom');
    });
    on(slidesWrap, 'pointercancel', () => { dragging = false; updateUI(); figureEl.classList.remove('no-zoom'); });

    // IntersectionObserver for carousel element
    if ('IntersectionObserver' in window) {
      const io = new IntersectionObserver((entries, o) => {
        entries.forEach(en => {
          if (en.isIntersecting) { figureEl.classList.add('in-view'); o.unobserve(figureEl); }
        });
      }, { threshold: 0.4 });
      io.observe(figureEl);
    } else {
      figureEl.classList.add('in-view');
    }

    // initial state
    slides().forEach((s, i) => s.classList.toggle('is-active', i === active));
    const initialImg = slides()[active]?.querySelector('img.full-bleed-img');
    if (initialImg) {
      if (prefersReducedMotion) { initialImg.style.transform = 'none'; initialImg.style.transition = 'none'; }
      // else: removed JS-driven zoom; visual zoom should be provided by CSS if desired
      cleanupInlineStylesForAll(700 + 60);
    }
    updateUI();

    // expose API on element
    figureEl.__initCarousel = { prev, next, goTo, getIndex: () => active };

    // recompute sizes on resize
    on(window, 'resize', () => { setSizes(); updateUI(); });
  }

  // Auto init any [data-carousel]
  const autoInit = () => {
    $$('figure[data-carousel]').forEach(f => {
      try { initCarousel(f); } catch (err) { console.error('Carousel init failed', err); }
    });
  };
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', autoInit);
  else autoInit();

  // preserve public API
  if (!window.DG) window.DG = {};
  window.DG.initCarousel = window.DG.initCarousel || ((el) => initCarousel(el));

  /* ---------- Notes ---------- */
  // - Inline image transform/transition management has been removed to prevent wrap snap.
  // - Functions that previously applied inline transforms are now no-ops for API stability.
  // - If you want a zoom effect, prefer driving it purely with CSS (see suggestion below).
})();
</script>
<script>
(function(){
  const checkbox = document.getElementById('dg-menu-checkbox');
  const toggle = document.getElementById('dg-menu-toggle');
  const panelWrap = document.querySelector('.dg-mobile-menu-wrap');
  const panel = document.getElementById('dg-mobile-panel');
  const closeBtn = document.getElementById('dg-menu-close');
  const FOCUSABLE = 'a[href], button:not([disabled]), textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select, [tabindex]:not([tabindex="-1"])';
  const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  if(!checkbox || !toggle || !panel) return;

  // safe attribute setter
  function safeSetAttr(el, name, val){
    if(!el) return;
    try { el.setAttribute(name, val); } catch(e) { /* ignore */ }
  }

  // helper: set ARIA and visibility
  function openMenu(){
    checkbox.checked = true; // keep CSS fallback in sync
    safeSetAttr(toggle, 'aria-expanded', 'true');
    safeSetAttr(panelWrap, 'aria-hidden', 'false');
    try { panel.focus(); } catch(e){ /* ignore */ }
    disableBodyScroll();
    trapFocus(panel);
  }
  function closeMenu(){
    checkbox.checked = false;
    safeSetAttr(toggle, 'aria-expanded', 'false');
    safeSetAttr(panelWrap, 'aria-hidden', 'true');
    restoreBodyScroll();
    releaseFocusTrap();
    try{ toggle.focus({preventScroll:true}); } catch(e){ try{ toggle.focus(); } catch(e2){} }
  }

  // when user toggles the checkbox (CSS-only path) — keep ARIA in sync
  checkbox.addEventListener('change', (ev)=>{
    const checked = checkbox.checked;
    safeSetAttr(toggle, 'aria-expanded', String(checked));
    safeSetAttr(panelWrap, 'aria-hidden', String(!checked));
    if(checked){ try{ panel.focus(); } catch(e){}; disableBodyScroll(); trapFocus(panel); }
    else { restoreBodyScroll(); releaseFocusTrap(); }
  });

  // label acts as a trigger: also support keyboard Enter/Space
  toggle.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); checkbox.checked ? closeMenu() : openMenu(); }
  });

  // support click on label to toggle (label already toggles checkbox in most browsers). Keep in sync.
  toggle.addEventListener('click', (e)=>{
    // small delay because checkbox change event fires after click; avoid double actions
    setTimeout(()=>{
      if(checkbox.checked) openMenu(); else closeMenu();
    }, 10);
  });

  // close button (optional)
  if(closeBtn){
    closeBtn.addEventListener('click', closeMenu);
  }

  // click backdrop to close (only if panelWrap exists)
  if(panelWrap){
    panelWrap.addEventListener('click', (e)=>{
      if(e.target === panelWrap || (e.target.classList && e.target.classList.contains('dg-mobile-backdrop'))) closeMenu();
    });
  }

  // Escape to close
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && checkbox.checked) { e.preventDefault(); closeMenu(); }
  });

  // Smooth scroll to anchors and close menu when selecting an item
  try {
    panel.querySelectorAll('[role="menuitem"]').forEach(item=>{
      item.addEventListener('click', (e)=>{
        // if it's an in-page anchor, let browser scroll. Close menu afterwards.
        setTimeout(()=>closeMenu(), 80);
      });
    });
  } catch(e){ /* ignore if query fails */ }

  // Body/html scroll lock (robust)
  let prevHtmlOverflow = null;
  let prevBodyOverflow = null;
  function disableBodyScroll(){
    // FIX: Check if we are already locked to prevent overwriting the original state with 'hidden'
    if (prevHtmlOverflow !== null || prevBodyOverflow !== null) return;
    
    try {
      prevHtmlOverflow = document.documentElement.style.overflow;
      prevBodyOverflow = document.body.style.overflow;
      document.documentElement.style.overflow = 'hidden';
      document.body.style.overflow = 'hidden';
    } catch(e){ /* best-effort; ignore */ }
  }
  function restoreBodyScroll(){
    try {
      document.documentElement.style.overflow = prevHtmlOverflow || '';
      document.body.style.overflow = prevBodyOverflow || '';
      prevHtmlOverflow = null;
      prevBodyOverflow = null;
    } catch(e){ /* ignore */ }
  }

  /* Focus trap implementation */
  let focusableEls = [];
  let firstFocusable = null, lastFocusable = null;
  let focusTrapActive = false;
  function trapFocus(container){
    try {
      focusableEls = Array.from(container.querySelectorAll(FOCUSABLE)).filter(el=>el.offsetWidth || el.offsetHeight || el.getClientRects().length);
      if(focusableEls.length){
        firstFocusable = focusableEls[0]; lastFocusable = focusableEls[focusableEls.length-1];
        // move focus to first
        try{ firstFocusable.focus(); } catch(e){ container.focus(); }
      } else {
        container.setAttribute('tabindex','-1'); container.focus();
      }
      if(!focusTrapActive){
        document.addEventListener('keydown', handleTab);
        focusTrapActive = true;
      }
    } catch(e){ /* ignore trapping errors */ }
  }
  function releaseFocusTrap(){
    if(focusTrapActive){
      document.removeEventListener('keydown', handleTab);
      focusTrapActive = false;
    }
    try{ panel.removeAttribute('tabindex'); } catch(e){}
    focusableEls = []; firstFocusable = lastFocusable = null;
  }
  function handleTab(e){
    if(e.key !== 'Tab') return;
    if(focusableEls.length === 0){ e.preventDefault(); return; }
    if(e.shiftKey){ // backward
      if(document.activeElement === firstFocusable){ e.preventDefault(); lastFocusable.focus(); }
    } else { // forward
      if(document.activeElement === lastFocusable){ e.preventDefault(); firstFocusable.focus(); }
    }
  }

  // ensure reduced-motion users are respected: keep transitions but avoid focus jank if requested
  if(prefersReduced){ document.documentElement.classList.add('reduced-motion'); }

  // expose programmatic API
  window.DG = window.DG || {};
  window.DG.mobileMenu = { open: openMenu, close: closeMenu, isOpen: ()=>checkbox.checked };

})();
</script>
  <!-- Implementation notes (developer) -->
  <!--
    Implementation Notes / Setup
    ---------------------------
    - This single HTML file is a high-fidelity prototype. For production:
      1) Replace Tailwind CDN with a built Tailwind pipeline (PostCSS) and purge unused CSS.
      2) Extract CSS tokens in a dedicated file (styles/tokens.css) and import across components.
      3) Split JS into modules, minify, and add cache headers (immutable) for assets.
      4) Use SVG files for logos and generate favicons (16/32/96) from source SVG.
      5) Hook the contact form to a serverless function (Netlify Functions, Vercel Serverless, or a backend API).

    Accessibility checklist included in code:
    - Skip link, visible focus states, aria-labels, roles, keyboard activation for gallery, modal close with Escape.
    - Contrast: tokens chosen to ensure at least AA for body and larger headings. Verify with your contrast tool on final devices.

    Performance & SEO
    - Use responsive images; here placeholders are inline SVG. Replace with optimized B/W JPEG or WebP files and supply srcset sizes.
    - Add meta open-graph tags, structured data (JSON-LD) for business, and sitemap.xml when deploying.

    Design tokens (example)
    - Colors: see :root variables at top.
    - Spacing: 8px baseline grid (Tailwind spacing extended).
    - Typography: Inter & Great Vibes with font-display:swap.

    Deliverables / Next steps for production delivery
    - Separate repo with files: index.html, styles/, scripts/, images/, favicon set, README with deploy steps.
    - Figma files: provide exported components, spacing, and tokens. (Not included here.)
    - Integration with CMS (optional): map portfolio items to a headless CMS and render dynamically.

  -->
  <!-- BEGIN: Swipe Overlay module (fixed) -->
<style id="dg-swipe-overlay-styles">
  :root{
    --dg-overlay-ease: cubic-bezier(.2,.9,.3,1);
    --dg-overlay-duration: 600ms;
    --dg-overlay-color: #0077B6;
    --dg-overlay-blur: 14px;
    --dg-prefix: dg-so-;
  }

  .dg-so-root {
    position: fixed;
    inset: 0;
    z-index: 99999;
    display:flex;
    align-items:stretch;
    justify-content:stretch;
    /* FIX: allow root to receive pointer events so event handlers reliably fire */
    pointer-events: auto;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  .dg-so-panel {
    position: absolute;
    inset: 0;
    display:flex;
    align-items:center;
    justify-content:center;
    -webkit-tap-highlight-color: transparent;
    will-change: opacity, transform, backdrop-filter, filter;
    transition: opacity 160ms var(--dg-overlay-ease), filter 160ms var(--dg-overlay-ease);
    opacity: 0;
    filter: none;
    background: transparent;
  }

  .dg-so-panel--intro { background-color: var(--dg-overlay-color); }
  .dg-so-panel--intro[data-active="true"] { opacity: 1; pointer-events: auto; }

  .dg-so-panel--message { background: transparent; color: white; padding: env(safe-area-inset-top) 20px 20px; text-align:center; }
  .dg-so-message {
    max-width: 80ch; margin: 0 18px; transform: translateY(6px); opacity: 0;
    transition: transform 220ms var(--dg-overlay-ease), opacity 220ms var(--dg-overlay-ease);
    will-change: transform, opacity;
    font-size: clamp(18px, 3.6vw, 20px);
  }
  .dg-so-panel--message[data-active="true"] .dg-so-message { transform: translateY(0); opacity: 1; }

  .dg-so-panel--reveal { background: transparent; }

  .dg-so-blur {
    position: absolute; inset:0; pointer-events:none;
    backdrop-filter: blur(0px); -webkit-backdrop-filter: blur(0px);
    background: rgba(17,17,17,0.35); opacity:0;
    transition:
      opacity var(--dg-overlay-duration) var(--dg-overlay-ease),
      backdrop-filter var(--dg-overlay-duration) var(--dg-overlay-ease),
      -webkit-backdrop-filter var(--dg-overlay-duration) var(--dg-overlay-ease);
    will-change: opacity, backdrop-filter;
    z-index: 2;
  }

  .dg-so-page-blur {
    filter: blur(var(--dg-overlay-blur));
    transition: filter var(--dg-overlay-duration) var(--dg-overlay-ease);
    will-change: filter;
  }

  .dg-so-sr {
    position: absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0);
    white-space:nowrap; border:0;
  }

  @media (prefers-reduced-motion: reduce) {
    .dg-so-blur, .dg-so-panel, .dg-so-message, .dg-so-page-blur { transition: none !important; filter: none !important; }
  }
</style>

<script id="dg-swipe-overlay-script">
(function(){
  if (window.DGSwipeOverlay) return;
  const DG = window.DGSwipeOverlay = {};
  const DEFAULTS = {
    sessionKey: 'dg_intro_shown_v1',
    duration: 600,
    easing: 'cubic-bezier(.2,.9,.3,1)',
    force: false,
    announce: true,
    prefix: 'dg-so-',
    blurPx: 14
  };
  let cfg = Object.assign({}, DEFAULTS);
  let root = null, panels = {}, stage = 0, busy = false, destroyed = false, srLive = null;
  const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  const on = (el, ev, fn, opts) => el && el.addEventListener(ev, fn, opts);
  const off = (el, ev, fn, opts) => el && el.removeEventListener(ev, fn, opts);

  function createDOM() {
    root = document.createElement('div');
    root.className = 'dg-so-root';
    root.setAttribute('role','dialog');
    root.setAttribute('aria-modal','true');

    const blur = document.createElement('div'); blur.className = 'dg-so-blur'; blur.setAttribute('data-dg','blur'); root.appendChild(blur);

    const p0 = document.createElement('div'); p0.className = 'dg-so-panel dg-so-panel--intro'; p0.setAttribute('data-stage','0'); p0.setAttribute('data-active','false'); root.appendChild(p0);

    const p1 = document.createElement('div'); p1.className = 'dg-so-panel dg-so-panel--message'; p1.setAttribute('data-stage','1'); p1.setAttribute('data-active','false');
    const msg = document.createElement('div'); msg.className = 'dg-so-message';
    msg.innerHTML = '<h2 style="margin:0;font-size:clamp(20px,4vw,28px);font-weight:700;">Welcome</h2><p style="margin:.6rem 0 0 0;opacity:.92">We craft considered, accessible websites. Swipe (or press Space/Enter/→) to continue.</p>';
    p1.appendChild(msg); root.appendChild(p1);

    const p2 = document.createElement('div'); p2.className = 'dg-so-panel dg-so-panel--reveal'; p2.setAttribute('data-stage','2'); p2.setAttribute('data-active','false'); root.appendChild(p2);

    srLive = document.createElement('div'); srLive.className = 'dg-so-sr'; srLive.setAttribute('aria-live','polite'); srLive.setAttribute('aria-atomic','true'); root.appendChild(srLive);

    panels = { root, blur, intro: p0, message: p1, reveal: p2 };
    document.body.appendChild(root);
  }

  function cleanDOM() {
    if (root && root.parentElement) root.parentElement.removeChild(root);
    root = null; panels = {}; if (srLive && srLive.parentElement) srLive.parentElement.removeChild(srLive); srLive = null;
  }

  function showPanel(index) {
    if (!root) return;
    stage = index;
    panels.intro.setAttribute('data-active', index === 0 ? 'true' : 'false');
    panels.message.setAttribute('data-active', index === 1 ? 'true' : 'false');
    panels.reveal.setAttribute('data-active', index === 2 ? 'true' : 'false');

    [panels.intro, panels.message, panels.reveal].forEach((p,i)=>{
      p.style.pointerEvents = (i === index ? 'auto' : 'none');
      p.setAttribute('aria-hidden', String(i !== index));
    });

    if (cfg.announce && srLive) {
      if (index === 0) srLive.textContent = 'Intro screen.';
      else if (index === 1) srLive.textContent = 'Intro message screen. Press Space or swipe to reveal site.';
      else if (index === 2) srLive.textContent = 'Landing page revealed.';
    }
  }

  function setPageBlur(enable) {
    try {
      const main = document.getElementById('main') || document.querySelector('main');
      const target = main || document.body;
      if (enable) target.classList.add('dg-so-page-blur'); else target.classList.remove('dg-so-page-blur');
    } catch(e){}
  }

  function doRevealTo(nextStage) {
    if (busy) return Promise.resolve(false);
    busy = true;
    const blur = panels.blur;
    const nextPanel = nextStage === 1 ? panels.message : panels.reveal;

    if (prefersReduced) {
      showPanel(nextStage); setPageBlur(false); busy = false; if (nextStage === 2) focusLandingHeading(); return Promise.resolve(true);
    }

    // Make next panel visible and blurred
    nextPanel.style.opacity = '1';
    nextPanel.style.filter = `blur(${cfg.blurPx}px)`;
    showPanel(nextStage);

    // animate blur overlay IN (quick)
    const coverInMs = Math.max(120, Math.round(cfg.duration / 6));
    blur.style.transition = `opacity ${coverInMs}ms ${cfg.easing}, backdrop-filter ${coverInMs}ms ${cfg.easing}`;
    blur.style.backdropFilter = `blur(${cfg.blurPx}px)`;
    blur.style.webkitBackdropFilter = `blur(${cfg.blurPx}px)`;
    blur.style.opacity = '1';
    setPageBlur(true);

    return new Promise((resolve) => {
      setTimeout(() => {
        // fade overlay out across full duration while un-blurring next panel
        blur.style.transition = `opacity ${cfg.duration}ms ${cfg.easing}, backdrop-filter ${cfg.duration}ms ${cfg.easing}`;
        blur.style.backdropFilter = `blur(0px)`; blur.style.webkitBackdropFilter = `blur(0px)`; blur.style.opacity = '0';

        nextPanel.style.transition = `filter ${cfg.duration}ms ${cfg.easing}, opacity ${Math.max(220, cfg.duration/3)}ms ${cfg.easing}`;
        nextPanel.style.filter = 'blur(0px)'; nextPanel.style.opacity = '1';
        setTimeout(()=> setPageBlur(false), Math.min(120, Math.round(cfg.duration / 10)));

        setTimeout(()=> {
          blur.style.opacity = '0'; blur.style.backdropFilter = 'blur(0px)';
          try { nextPanel.style.transition = ''; nextPanel.style.filter = ''; } catch(e){}
          busy = false;
          if (nextStage === 2) focusLandingHeading();
          resolve(true);
        }, cfg.duration + 30);
      }, coverInMs);
    });
  }

  // Input handling
  function bindInput() {
    let pointerDown = false, startX = 0, startY = 0, moved = false;
    function onPointerDown(e) {
      if (busy) return;
      pointerDown = true;
      startX = (e.touches && e.touches[0]) ? e.touches[0].clientX : (e.clientX || 0);
      startY = (e.touches && e.touches[0]) ? e.touches[0].clientY : (e.clientY || 0);
      moved = false;
    }
    function onPointerMove(e) {
      if (!pointerDown) return;
      const cx = (e.touches && e.touches[0]) ? e.touches[0].clientX : (e.clientX || 0);
      const cy = (e.touches && e.touches[0]) ? e.touches[0].clientY : (e.clientY || 0);
      if (Math.abs(cx - startX) > 18 || Math.abs(cy - startY) > 18) moved = true;
    }
    function onPointerUp(e) {
      if (!pointerDown) return;
      pointerDown = false;
      if (busy) return;
      if (!moved) { advanceOnce(); return; }
      const cx = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientX : (e.clientX || startX);
      const cy = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientY : (e.clientY || startY);
      if (Math.abs(cx - startX) > 40 || Math.abs(cy - startY) > 40) advanceOnce();
    }

    function onClick(e) { if (busy) return; advanceOnce(); }
    function onKey(e) {
      if (busy) return;
      if (e.key === ' ' || e.code === 'Space' || e.key === 'Enter' || e.key === 'ArrowRight') { e.preventDefault(); advanceOnce(); }
    }

    // Bind to panels individually (robust if root is overlapped)
    on(panels.intro, 'pointerdown', onPointerDown, {passive:true});
    on(panels.message, 'pointerdown', onPointerDown, {passive:true});
    on(panels.reveal, 'pointerdown', onPointerDown, {passive:true});
    on(document, 'pointermove', onPointerMove, {passive:true});
    on(document, 'pointerup', onPointerUp, {passive:true});
    on(panels.intro, 'click', onClick);
    on(panels.message, 'click', onClick);
    on(panels.reveal, 'click', onClick);
    on(document, 'keydown', onKey);

    DG._handlers = { onPointerDown, onPointerMove, onPointerUp, onClick, onKey };
  }

  function unbindInput() {
    if (!DG._handlers) return;
    const h = DG._handlers;
    off(panels.intro, 'pointerdown', h.onPointerDown);
    off(panels.message, 'pointerdown', h.onPointerDown);
    off(panels.reveal, 'pointerdown', h.onPointerDown);
    off(document, 'pointermove', h.onPointerMove);
    off(document, 'pointerup', h.onPointerUp);
    off(panels.intro, 'click', h.onClick);
    off(panels.message, 'click', h.onClick);
    off(panels.reveal, 'click', h.onClick);
    off(document, 'keydown', h.onKey);
    DG._handlers = null;
  }

  function advanceOnce() {
    if (busy) return;
    if (stage === 0) doRevealTo(1);
    else if (stage === 1) {
      doRevealTo(2);
      try { if (!cfg.force) sessionStorage.setItem(cfg.sessionKey, '1'); } catch(e){}
      setTimeout(()=> destroyOverlay(), (prefersReduced ? 120 : cfg.duration + 80));
    }
  }

  function focusLandingHeading() {
    try {
      let h = document.querySelector('#main h1') || document.querySelector('main h1') || document.querySelector('h1');
      if (h) { const prevTab = h.getAttribute('tabindex'); h.setAttribute('tabindex','-1'); h.focus({preventScroll:true}); if (prevTab === null) h.removeAttribute('tabindex'); }
    } catch(e){}
  }

  function initSwipeOverlay(options = {}) {
    if (destroyed) return;
    cfg = Object.assign({}, DEFAULTS, options || {});
    cfg.duration = Number(cfg.duration || DEFAULTS.duration);
    cfg.easing = cfg.easing || DEFAULTS.easing;
    cfg.force = Boolean(cfg.force);
    cfg.blurPx = (typeof cfg.blurPx === 'number') ? cfg.blurPx : DEFAULTS.blurPx;

    try { if (!cfg.force && sessionStorage.getItem(cfg.sessionKey) === '1') return; } catch(e){}

    if (!root) createDOM();
    showPanel(0);
    bindInput();
    try { document.documentElement.style.overflow = 'hidden'; document.body.style.overflow = 'hidden'; } catch(e){}

    if (prefersReduced) { setTimeout(()=> showPanel(1), 160); }
  }

  function destroyOverlay() {
    unbindInput();
    setPageBlur(false);
    try { document.documentElement.style.overflow = ''; document.body.style.overflow = ''; } catch(e){}
    cleanDOM();
    destroyed = true;
  }

  DG.initSwipeOverlay = initSwipeOverlay;
  DG.destroySwipeOverlay = destroyOverlay;

  // Auto-init (best-effort safe)
  try {
    const navEntries = (performance && performance.getEntriesByType) ? performance.getEntriesByType('navigation') : [];
    const navType = (navEntries && navEntries[0] && navEntries[0].type) || ((performance && performance.navigation && performance.navigation.type) ? performance.navigation.type : 'navigate');
    const shouldAuto = (navType === 'navigate' || navType === 'reload' || navType === undefined);
    if (shouldAuto) {
      window.requestAnimationFrame(()=> { setTimeout(()=> { if (document.visibilityState === 'visible') initSwipeOverlay(); }, 80); });
    }
  } catch(e) { setTimeout(()=> initSwipeOverlay(), 120); }
})();
</script>
<!-- END: Swipe Overlay module -->
</body>
</html>

